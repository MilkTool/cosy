var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.inherits=function(d,l){function n(){}n.prototype=l.prototype;d.superClass_=l.prototype;d.prototype=new n;d.prototype.constructor=d;for(var p in l)if("prototype"!=p)if(Object.defineProperties){var g=Object.getOwnPropertyDescriptor(l,p);g&&Object.defineProperty(d,p,g)}else d[p]=l[p]};$jscomp.owns=function(d,l){return Object.prototype.hasOwnProperty.call(d,l)};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;
$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(d,l,n){d!=Array.prototype&&d!=Object.prototype&&(d[l]=n.value)};$jscomp.getGlobal=function(d){return"undefined"!=typeof window&&window===d?d:"undefined"!=typeof global&&null!=global?global:d};$jscomp.global=$jscomp.getGlobal(this);
$jscomp.polyfill=function(d,l,n,p){if(l){n=$jscomp.global;d=d.split(".");for(p=0;p<d.length-1;p++){var g=d[p];g in n||(n[g]={});n=n[g]}d=d[d.length-1];p=n[d];l=l(p);l!=p&&null!=l&&$jscomp.defineProperty(n,d,{configurable:!0,writable:!0,value:l})}};$jscomp.polyfill("Object.assign",function(d){return d?d:function(d,n){for(var l=1;l<arguments.length;l++){var g=arguments[l];if(g)for(var t in g)$jscomp.owns(g,t)&&(d[t]=g[t])}return d}},"es6","es3");$jscomp.SYMBOL_PREFIX="jscomp_symbol_";
$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};$jscomp.symbolCounter_=0;$jscomp.Symbol=function(d){return $jscomp.SYMBOL_PREFIX+(d||"")+$jscomp.symbolCounter_++};
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var d=$jscomp.global.Symbol.iterator;d||(d=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator"));"function"!=typeof Array.prototype[d]&&$jscomp.defineProperty(Array.prototype,d,{configurable:!0,writable:!0,value:function(){return $jscomp.arrayIterator(this)}});$jscomp.initSymbolIterator=function(){}};$jscomp.arrayIterator=function(d){var l=0;return $jscomp.iteratorPrototype(function(){return l<d.length?{done:!1,value:d[l++]}:{done:!0}})};
$jscomp.iteratorPrototype=function(d){$jscomp.initSymbolIterator();d={next:d};d[$jscomp.global.Symbol.iterator]=function(){return this};return d};$jscomp.iteratorFromArray=function(d,l){$jscomp.initSymbolIterator();d instanceof String&&(d+="");var n=0,p={next:function(){if(n<d.length){var g=n++;return{value:l(g,d[g]),done:!1}}p.next=function(){return{done:!0,value:void 0}};return p.next()}};p[Symbol.iterator]=function(){return p};return p};
$jscomp.polyfill("Array.prototype.values",function(d){return d?d:function(){return $jscomp.iteratorFromArray(this,function(d,n){return n})}},"es6","es3");$jscomp.checkStringArgs=function(d,l,n){if(null==d)throw new TypeError("The 'this' value for String.prototype."+n+" must not be null or undefined");if(l instanceof RegExp)throw new TypeError("First argument to String.prototype."+n+" must not be a regular expression");return d+""};
$jscomp.polyfill("String.prototype.startsWith",function(d){return d?d:function(d,n){var l=$jscomp.checkStringArgs(this,d,"startsWith");d+="";var g=l.length,t=d.length;n=Math.max(0,Math.min(n|0,l.length));for(var f=0;f<t&&n<g;)if(l[n++]!=d[f++])return!1;return f>=t}},"es6","es3");
$jscomp.polyfill("String.fromCodePoint",function(d){return d?d:function(d){for(var l="",p=0;p<arguments.length;p++){var g=Number(arguments[p]);if(0>g||1114111<g||g!==Math.floor(g))throw new RangeError("invalid_code_point "+g);65535>=g?l+=String.fromCharCode(g):(g-=65536,l+=String.fromCharCode(g>>>10&1023|55296),l+=String.fromCharCode(g&1023|56320))}return l}},"es6","es3");
$jscomp.polyfill("Array.prototype.keys",function(d){return d?d:function(){return $jscomp.iteratorFromArray(this,function(d){return d})}},"es6","es3");
(function(d,l){function n(a,b){if(null==b)return null;null==b.__id__&&(b.__id__=l.$haxeUID++);var c;null==a.hx__closures__?a.hx__closures__={}:c=a.hx__closures__[b.__id__];null==c&&(c=b.bind(a),a.hx__closures__[b.__id__]=c);return c}function p(a){this.push(a)}d.cosy=d.cosy||{};d.cosy.Cosy=d.cosy.Cosy||{};var g=function(){return v.Boot.__string_rec(this,"")},t=t||{},f,w=function(){};w.cca=function(a,b){a=a.charCodeAt(b);if(a==a)return a};w.substr=function(a,b,e){if(null==e)e=a.length;else if(0>e)if(0==
b)e=a.length+e;else return"";return a.substr(b,e)};w.now=function(){return Date.now()};w.__name__=!0;Math.__name__=!0;var u=function(){};u.string=function(a){return v.Boot.__string_rec(a,"")};u.parseInt=function(a){if(null!=a)for(var b=0,e=a.length;b<e;){var m=b++,d=a.charCodeAt(m);if(8>=d||14<=d&&32!=d&&45!=d)if(b=a.charCodeAt(m+1),a=parseInt(a,120==b||88==b?16:10),isNaN(a))break;else return a}return null};u.random=function(a){return 0>=a?0:Math.floor(Math.random()*a)};u.__name__=!0;var q=function(){};
q.startsWith=function(a,b){return a.length>=b.length?0==a.lastIndexOf(b,0):!1};q.isSpace=function(a,b){a=w.cca(a,b);return 8<a&&14>a?!0:32==a};q.ltrim=function(a){for(var b=a.length,e=0;e<b&&q.isSpace(a,e);)++e;return 0<e?w.substr(a,e,b-e):a};q.rtrim=function(a){for(var b=a.length,e=0;e<b&&q.isSpace(a,b-e-1);)++e;return 0<e?w.substr(a,0,b-e):a};q.trim=function(a){return q.ltrim(q.rtrim(a))};q.replace=function(a,b,e){return a.split(b).join(e)};q.__name__=!0;var b={Error:function(a){this.message=a}};
b.Error.__name__=!0;Object.assign(b.Error.prototype,{__class__:b.Error});var k=function(a){return b.Error.call(this,a)||this};$jscomp.inherits(k,b.Error);b.Break=k;b.Break.__name__=!0;b.Break.__super__=b.Error;Object.assign(b.Break.prototype,{__class__:b.Break});b.Callable=function(){};b.Callable.__name__=!0;Object.assign(b.Callable.prototype,{__class__:b.Callable});k=function(a){return b.Error.call(this,a)||this};$jscomp.inherits(k,b.Error);b.Continue=k;b.Continue.__name__=!0;b.Continue.__super__=
b.Error;Object.assign(b.Continue.prototype,{__class__:b.Continue});b.phases={};k=function(){this.locals=new h.ds.ObjectMap;this.globals=new b.Environment;this.globals.define("clock",new b.phases._Interpreter.ClockCallable);this.globals.define("random",new b.phases._Interpreter.RandomCallable);this.environment=this.globals};k.prototype.interpret=function(a){try{for(var c=0;c<a.length;)this.execute(a[c++])}catch(e){if(a=h.Exception.caught(e).unwrap(),a instanceof b.RuntimeError)b.Cosy.runtimeError(a);
else if(!(a instanceof h.io.Eof))throw e;}};k.prototype.execute=function(a){for(;;){switch(a._hx_index){case 0:this.executeBlock(a.statements,new b.Environment(this.environment));break;case 1:throw h.Exception.thrown(new b.Break);case 2:throw h.Exception.thrown(new b.Continue);case 3:this.evaluate(a.e);break;case 4:var c=a.body,e=a.name,m=a.keyword,d=this.evaluate(a.from);"number"!=typeof d&&b.Cosy.error(b.ErrorDataType.Token(m),'Number expected in "from" clause of loop.');a=this.evaluate(a.to);"number"!=
typeof a&&b.Cosy.error(b.ErrorDataType.Token(m),'Number expected in "to" clause of loop.');m=new b.Environment(this.environment);try{for(;d<a;){var f=d++;null!=e&&m.define(e.lexeme,f);try{this.executeBlock(c,m)}catch(r){if(!(h.Exception.caught(r).unwrap()instanceof b.Continue))throw r;}}}catch(r){if(!(h.Exception.caught(r).unwrap()instanceof b.Break))throw r;}break;case 5:f=a.body;c=a.name;a=this.evaluate(a.array);e=new b.Environment(this.environment);try{for(d=0;d<a.length;){e.define(c.lexeme,a[d++]);
try{this.executeBlock(f,e)}catch(r){if(!(h.Exception.caught(r).unwrap()instanceof b.Continue))throw r;}}}catch(r){if(!(h.Exception.caught(r).unwrap()instanceof b.Break))throw r;}break;case 6:f=a.body;a=a.cond;c=new b.Environment(this.environment);try{for(;null!=a?this.isTruthy(this.evaluate(a)):1;)try{this.executeBlock(f,c)}catch(r){if(!(h.Exception.caught(r).unwrap()instanceof b.Continue))throw r;}}catch(r){if(!(h.Exception.caught(r).unwrap()instanceof b.Break))throw r;}break;case 7:f=a.name;if(a.foreign){this.environment.define(f.lexeme,
b.Cosy.foreignFunctions.h[f.lexeme]);break}this.environment.define(f.lexeme,new b.Function(f,a.params,a.body,this.environment,!1));break;case 8:c=a.el;if(this.isTruthy(this.evaluate(a.cond))){a=a.then;continue}else if(null!=c){a=c;continue}break;case 9:b.Cosy.println(this.stringify(this.evaluate(a.e)));break;case 10:throw a=a.value,h.Exception.thrown(new b.Return(null==a?null:this.evaluate(a)));case 11:f=a.declarations;a=a.name;this.environment.define(a.lexeme,null);c=this.environment;this.environment=
new b.Environment(this.environment);e=new h.ds.StringMap;for(d=0;d<f.length;){var g=f[d];++d;12==g._hx_index&&(m=g.init,g=g.name.lexeme,m=null!=m?this.evaluate(m):null,e.h[g]=m)}this.environment=c;this.environment.assign(a,new b.StructInstance(a,e));break;case 12:f=a.init,c=a.name,a.foreign?this.environment.define(c.lexeme,b.Cosy.foreignVariables.h[c.lexeme]):(a=b.phases.Interpreter.uninitialized,null!=f&&(a=this.evaluate(f)),a instanceof b.StructInstance&&(a=a.clone()),this.environment.define(c.lexeme,
a))}break}};k.prototype.resolve=function(a,b){this.locals.set(a,b)};k.prototype.executeBlock=function(a,b){var c=this.environment;try{this.environment=b;for(b=0;b<a.length;)this.execute(a[b++]);this.environment=c}catch(m){throw a=h.Exception.caught(m).unwrap(),this.environment=c,h.Exception.thrown(a);}};k.prototype.evaluate=function(a){for(;;)switch(a._hx_index){case 0:a=a.exprs;for(var c=[],e=0;e<a.length;)c.push(this.evaluate(a[e++]));return c;case 1:var m=a.value;e=a.op;c=a.name;switch(e.type._hx_index){case 11:var d=
this.lookUpVariable(c,a);m=this.evaluate(m);this.checkNumberOperands(e,d,m);e=d-m;break;case 13:d=this.lookUpVariable(c,a);m=this.evaluate(m);if("number"==typeof d&&"number"==typeof m)e=d+m;else if("number"==typeof d&&"string"==typeof m)e=d+m;else if("string"==typeof d&&"number"==typeof m)e=d+m;else if("string"==typeof d&&"string"==typeof m)e=d+m;else throw h.Exception.thrown(new b.RuntimeError(e,"Operands cannot be concatinated."));break;case 15:d=this.lookUpVariable(c,a);m=this.evaluate(m);this.checkNumberOperands(e,
d,m);e=d/m;break;case 17:d=this.lookUpVariable(c,a);m=this.evaluate(m);this.checkNumberOperands(e,d,m);e=d*m;break;case 20:e=this.evaluate(m);break;default:throw h.Exception.thrown("error");}a=this.locals.h[a.__id__];null==a?this.globals.assign(c,e):this.environment.assignAt(a,c,e);return e;case 2:switch(c=a.op,e=this.evaluate(a.left),a=this.evaluate(a.right),c.type._hx_index){case 10:return this.checkNumberOperands(c,e,a),e-a;case 12:if("number"==typeof e&&"number"==typeof a||"number"==typeof e&&
"string"==typeof a||"string"==typeof e&&"number"==typeof a||"string"==typeof e&&"string"==typeof a)return e+a;throw h.Exception.thrown(new b.RuntimeError(c,"Operands cannot be concatinated."));case 14:return this.checkNumberOperands(c,e,a),e/a;case 16:return this.checkNumberOperands(c,e,a),e*a;case 19:return!this.isEqual(e,a);case 21:return this.isEqual(e,a);case 22:return this.checkNumberOperands(c,e,a),e>a;case 23:return this.checkNumberOperands(c,e,a),e>=a;case 24:return this.checkNumberOperands(c,
e,a),e<a;case 25:return this.checkNumberOperands(c,e,a),e<=a;default:return null}case 3:e=a.$arguments;c=a.paren;m=this.evaluate(a.callee);d=n(this,this.evaluate);a=Array(e.length);for(var f=0,g=e.length;f<g;){var k=f++;a[k]=d(e[k])}if(v.Boot.__implements(m,b.Callable)){e=m;if(!(e instanceof b.ForeignFunction)&&(m=e.arity(),a.length!=m))throw h.Exception.thrown(new b.RuntimeError(c,"Expected "+m+" argument(s) but got "+a.length+"."));return e.call(this,a)}throw h.Exception.thrown(new b.RuntimeError(c,
"Can only call functions and classes"));case 4:c=a.name;a=this.evaluate(a.obj);if(a instanceof Array)return this.arrayGet(a,c);if(a instanceof b.StructInstance)return a.get(c);if("string"==typeof a)return this.stringGet(a,c);throw h.Exception.thrown(new b.RuntimeError(c,"Only instances have properties"));case 5:a=a.e;continue;case 6:return a.v;case 7:c=a.right;e=this.evaluate(a.left);switch(a.op.type._hx_index){case 29:if(this.isTruthy(e))a=c;else return e;break;case 40:if(this.isTruthy(e))return e;
a=c;break;default:a=c}break;case 8:return this.lookUpVariable(a.name,a);case 9:c=a.name;e=this.evaluate(a.obj);a=this.evaluate(a.value);if(e instanceof b.StructInstance)e.set(c,a);else throw h.Exception.thrown(new b.RuntimeError(c,"Only instances have fields"));return a;case 10:c=a.decls;e=a.name;a=this.lookUpVariable(e,a);if(!(a instanceof b.StructInstance))throw h.Exception.thrown(new b.RuntimeError(e,"Struct initializer on non-struct object."));a=a.clone();for(e=0;e<c.length;)m=c[e],++e,1==m._hx_index&&
a.set(m.name,this.evaluate(m.value));return a;case 11:switch(c=a.op,a=this.evaluate(a.right),c.type._hx_index){case 10:return this.checkNumberOperand(c,a),-a;case 18:return!this.isTruthy(a);default:return null}case 12:return this.lookUpVariable(a.name,a);case 13:return new b.Function(null,a.params,a.body,this.environment,!1)}};k.prototype.arrayGet=function(a,c){switch(c.lexeme){case "concat":return new b.phases._Interpreter.CustomCallable(1,function(b){b=b[0];for(var c=n(a,p),e=Array(b.length),d=
0,f=b.length;d<f;){var g=d++;e[g]=c(b[g])}return e});case "contains":return new b.phases._Interpreter.CustomCallable(1,function(b){return-1!=a.indexOf(b[0])});case "get":return new b.phases._Interpreter.CustomCallable(1,function(b){return a[b[0]]});case "length":return a.length;case "pop":return new b.phases._Interpreter.CustomCallable(0,function(e){if(0==a.length)throw h.Exception.thrown(new b.RuntimeError(c,"Cannot pop from empty array."));return a.pop()});case "push":return new b.phases._Interpreter.CustomCallable(1,
function(b){for(var c=n(a,p),e=Array(b.length),d=0,f=b.length;d<f;){var g=d++;e[g]=c(b[g])}return e});default:throw h.Exception.thrown(new b.RuntimeError(c,'Undefined method "'+c.lexeme+'".'));}};k.prototype.stringGet=function(a,c){switch(c.lexeme){case "charAt":return new b.phases._Interpreter.CustomCallable(1,function(b){return a.charAt(b[0])});case "length":return a.length;case "split":return new b.phases._Interpreter.CustomCallable(1,function(b){return a.split(b[0])});default:throw h.Exception.thrown(new b.RuntimeError(c,
'Undefined method "'+c.lexeme+'".'));}};k.prototype.lookUpVariable=function(a,c){c=this.locals.h[c.__id__];c=null==c?this.globals.get(a):this.environment.getAt(c,a.lexeme);if(c==b.phases.Interpreter.uninitialized)throw h.Exception.thrown(new b.RuntimeError(a,'Accessing uninitialized variable "'+a.lexeme+'".'));return c};k.prototype.isTruthy=function(a){return null==a?!1:"boolean"==typeof a?a:!0};k.prototype.isEqual=function(a,b){return null==a&&null==b?!0:null==a?!1:a==b};k.prototype.checkNumberOperand=
function(a,c){if("number"!=typeof c)throw h.Exception.thrown(new b.RuntimeError(a,"Operand must be a number"));};k.prototype.checkNumberOperands=function(a,c,e){if("number"!=typeof c||"number"!=typeof e)throw h.Exception.thrown(new b.RuntimeError(a,"Operand must be a number"));};k.prototype.stringify=function(a){return null==a?"nil":""+(null==a?"null":u.string(a))};b.phases.Interpreter=k;b.phases.Interpreter.__name__=!0;Object.assign(b.phases.Interpreter.prototype,{__class__:b.phases.Interpreter});
k=function(a){this.values=new h.ds.StringMap;this.enclosing=a};k.prototype.define=function(a,b){this.values.h[a]=b};k.prototype.get=function(a){if(Object.prototype.hasOwnProperty.call(this.values.h,a.lexeme))return this.values.h[a.lexeme];if(null!=this.enclosing)return this.enclosing.get(a);throw h.Exception.thrown(new b.RuntimeError(a,'Undefined variable "'+a.lexeme+'".'));};k.prototype.getAt=function(a,b){return this.ancestor(a).values.h[b]};k.prototype.assign=function(a,c){if(Object.prototype.hasOwnProperty.call(this.values.h,
a.lexeme))this.values.h[a.lexeme]=c;else if(null!=this.enclosing)this.enclosing.assign(a,c);else throw h.Exception.thrown(new b.RuntimeError(a,'Undefined variable "'+a.lexeme+'".'));};k.prototype.assignAt=function(a,b,e){this.ancestor(a).values.h[b.lexeme]=e};k.prototype.ancestor=function(a){for(var b=this,e=0;e<a;)++e,b=b.enclosing;return b};b.Environment=k;b.Environment.__name__=!0;Object.assign(b.Environment.prototype,{__class__:b.Environment});b.phases._Interpreter={};k=function(){};k.prototype.arity=
function(){return 0};k.prototype.call=function(a,b){return w.now()/1E3*1E3};k.prototype.toString=function(){return"<native fn>"};b.phases._Interpreter.ClockCallable=k;b.phases._Interpreter.ClockCallable.__name__=!0;b.phases._Interpreter.ClockCallable.__interfaces__=[b.Callable];Object.assign(b.phases._Interpreter.ClockCallable.prototype,{__class__:b.phases._Interpreter.ClockCallable});k=function(){};k.prototype.arity=function(){return 0};k.prototype.call=function(a,b){return Math.random()};k.prototype.toString=
function(){return"<native fn>"};b.phases._Interpreter.RandomCallable=k;b.phases._Interpreter.RandomCallable.__name__=!0;b.phases._Interpreter.RandomCallable.__interfaces__=[b.Callable];Object.assign(b.phases._Interpreter.RandomCallable.prototype,{__class__:b.phases._Interpreter.RandomCallable});k=function(){};k.main=function(){b.Cosy.setFunction("randomInt",function(a){return u.random(a[0])});b.Cosy.setFunction("readInput",function(a){throw h.Exception.thrown("Not implemented on this platform!");
});b.Cosy.setFunction("stringToNumber",function(a){return u.parseInt(a[0])})};k.println=function(a){l.console.log(a)};k.validate=function(a){b.Cosy.hadError=!1;a=(new b.phases.Parser((new b.phases.Scanner(a)).scanTokens())).parse();if(!b.Cosy.hadError){var c=new b.phases.Resolver(b.Cosy.interpreter);c.beginScope();c.resolveStmts(a);c.endScope();(new b.phases.Typer).typeStmts(a)}};k.setFunction=function(a,c){b.Cosy.foreignFunctions.h[a]=new b.ForeignFunction(c)};k.setVariable=function(a,c){b.Cosy.foreignVariables.h[a]=
c};k.run=function(a){b.Cosy.hadError=!1;a=(new b.phases.Parser((new b.phases.Scanner(a)).scanTokens())).parse();if(!b.Cosy.hadError){var c=new b.phases.Resolver(b.Cosy.interpreter);c.beginScope();c.resolveStmts(a);c.endScope();(new b.phases.Typer).typeStmts(a);if(!b.Cosy.hadError)if(a=(new b.phases.Optimizer).optimizeStmts(a),b.Cosy.prettyPrint){c=new b.phases.AstPrinter;for(var e=0;e<a.length;)b.Cosy.println(c.printStmt(a[e++]))}else if(b.Cosy.javascript)for(b.Cosy.println("// standard library\nlet clock = Date.now;\n"),
c=new b.phases.JavaScriptPrinter,e=0;e<a.length;)b.Cosy.println(c.printStmt(a[e++]));else b.Cosy.interpreter.interpret(a)}};k.reportWarning=function(a,c,e){b.Cosy.println("[line "+a+"] Warning "+c+": "+e)};k.warning=function(a,c){switch(a._hx_index){case 0:b.Cosy.reportWarning(a.v,"",c);break;case 1:a=a.v,a.type==b.TokenType.Eof?b.Cosy.reportWarning(a.line,"at end",c):b.Cosy.reportWarning(a.line,'at "'+a.lexeme+'"',c)}};k.report=function(a,c,e){b.Cosy.println("[line "+a+"] Error "+c+": "+e);b.Cosy.hadError=
!0};k.error=function(a,c){switch(a._hx_index){case 0:b.Cosy.report(a.v,"",c);break;case 1:a=a.v,a.type==b.TokenType.Eof?b.Cosy.report(a.line,"at end",c):b.Cosy.report(a.line,'at "'+a.lexeme+'"',c)}};k.runtimeError=function(a){b.Cosy.println("[line "+a.token.line+"] Runtime Error: "+a.message);b.Cosy.hadRuntimeError=!0};b.Cosy=k;d.cosy.Cosy.run=b.Cosy.run;d.cosy.Cosy.setVariable=b.Cosy.setVariable;d.cosy.Cosy.setFunction=b.Cosy.setFunction;d.cosy.Cosy.validate=b.Cosy.validate;b.Cosy.__name__=!0;b.ErrorDataType=
t["cosy.ErrorDataType"]={__ename__:!0,__constructs__:["Line","Token"],Line:(f=function(a){return{_hx_index:0,v:a,__enum__:"cosy.ErrorDataType",toString:g}},f.__params__=["v"],f),Token:(f=function(a){return{_hx_index:1,v:a,__enum__:"cosy.ErrorDataType",toString:g}},f.__params__=["v"],f)};d=function(a){this.method=a};d.prototype.arity=function(){return 0};d.prototype.call=function(a,b){return this.method(b)};d.prototype.toString=function(){return"<foreign fn>"};b.ForeignFunction=d;b.ForeignFunction.__name__=
!0;b.ForeignFunction.__interfaces__=[b.Callable];Object.assign(b.ForeignFunction.prototype,{__class__:b.ForeignFunction});b.Expr=t["cosy.Expr"]={__ename__:!0,__constructs__:"ArrayLiteral Assign Binary Call Get Grouping Literal Logical MutArgument Set StructInit Unary Variable AnonFunction".split(" "),ArrayLiteral:(f=function(a,b){return{_hx_index:0,keyword:a,exprs:b,__enum__:"cosy.Expr",toString:g}},f.__params__=["keyword","exprs"],f),Assign:(f=function(a,b,e){return{_hx_index:1,name:a,op:b,value:e,
__enum__:"cosy.Expr",toString:g}},f.__params__=["name","op","value"],f),Binary:(f=function(a,b,e){return{_hx_index:2,left:a,op:b,right:e,__enum__:"cosy.Expr",toString:g}},f.__params__=["left","op","right"],f),Call:(f=function(a,b,e){return{_hx_index:3,callee:a,paren:b,$arguments:e,__enum__:"cosy.Expr",toString:g}},f.__params__=["callee","paren","$arguments"],f),Get:(f=function(a,b){return{_hx_index:4,obj:a,name:b,__enum__:"cosy.Expr",toString:g}},f.__params__=["obj","name"],f),Grouping:(f=function(a){return{_hx_index:5,
e:a,__enum__:"cosy.Expr",toString:g}},f.__params__=["e"],f),Literal:(f=function(a){return{_hx_index:6,v:a,__enum__:"cosy.Expr",toString:g}},f.__params__=["v"],f),Logical:(f=function(a,b,e){return{_hx_index:7,left:a,op:b,right:e,__enum__:"cosy.Expr",toString:g}},f.__params__=["left","op","right"],f),MutArgument:(f=function(a,b){return{_hx_index:8,keyword:a,name:b,__enum__:"cosy.Expr",toString:g}},f.__params__=["keyword","name"],f),Set:(f=function(a,b,e){return{_hx_index:9,obj:a,name:b,value:e,__enum__:"cosy.Expr",
toString:g}},f.__params__=["obj","name","value"],f),StructInit:(f=function(a,b){return{_hx_index:10,name:a,decls:b,__enum__:"cosy.Expr",toString:g}},f.__params__=["name","decls"],f),Unary:(f=function(a,b){return{_hx_index:11,op:a,right:b,__enum__:"cosy.Expr",toString:g}},f.__params__=["op","right"],f),Variable:(f=function(a){return{_hx_index:12,name:a,__enum__:"cosy.Expr",toString:g}},f.__params__=["name"],f),AnonFunction:(f=function(a,b,e){return{_hx_index:13,params:a,body:b,returnType:e,__enum__:"cosy.Expr",
toString:g}},f.__params__=["params","body","returnType"],f)};d=function(a,b,e,d,f){this.name=a;this.params=b;this.body=e;this.closure=d;this.isInitializer=f};d.prototype.arity=function(){return this.params.length};d.prototype.call=function(a,c){for(var e=new b.Environment(this.closure),d=0,f=this.params.length;d<f;){var g=d++;e.define(this.params[g].name.lexeme,c[g])}try{a.executeBlock(this.body,e)}catch(x){if(a=h.Exception.caught(x).unwrap(),a instanceof b.Return){if(!this.isInitializer)return a.value}else throw x;
}return this.isInitializer?this.closure.getAt(0,"this"):null};d.prototype.toString=function(){return null!=this.name?"<fn "+this.name.lexeme+">":"<fn>"};b.Function=d;b.Function.__name__=!0;b.Function.__interfaces__=[b.Callable];Object.assign(b.Function.prototype,{__class__:b.Function});d=function(a){var c=b.Error.call(this)||this;c.value=a;return c};$jscomp.inherits(d,b.Error);b.Return=d;b.Return.__name__=!0;b.Return.__super__=b.Error;Object.assign(b.Return.prototype,{__class__:b.Return});d=function(a,
c){c=b.Error.call(this,c)||this;c.token=a;return c};$jscomp.inherits(d,b.Error);b.RuntimeError=d;b.RuntimeError.__name__=!0;b.RuntimeError.__super__=b.Error;Object.assign(b.RuntimeError.prototype,{__class__:b.RuntimeError});b.Stmt=t["cosy.Stmt"]={__ename__:!0,__constructs__:"Block Break Continue Expression For ForArray ForCondition Function If Print Return Struct Var".split(" "),Block:(f=function(a){return{_hx_index:0,statements:a,__enum__:"cosy.Stmt",toString:g}},f.__params__=["statements"],f),Break:(f=
function(a){return{_hx_index:1,keyword:a,__enum__:"cosy.Stmt",toString:g}},f.__params__=["keyword"],f),Continue:(f=function(a){return{_hx_index:2,keyword:a,__enum__:"cosy.Stmt",toString:g}},f.__params__=["keyword"],f),Expression:(f=function(a){return{_hx_index:3,e:a,__enum__:"cosy.Stmt",toString:g}},f.__params__=["e"],f),For:(f=function(a,b,e,d,f){return{_hx_index:4,keyword:a,name:b,from:e,to:d,body:f,__enum__:"cosy.Stmt",toString:g}},f.__params__=["keyword","name","from","to","body"],f),ForArray:(f=
function(a,b,e){return{_hx_index:5,name:a,array:b,body:e,__enum__:"cosy.Stmt",toString:g}},f.__params__=["name","array","body"],f),ForCondition:(f=function(a,b){return{_hx_index:6,cond:a,body:b,__enum__:"cosy.Stmt",toString:g}},f.__params__=["cond","body"],f),Function:(f=function(a,b,e,d,f){return{_hx_index:7,name:a,params:b,body:e,returnType:d,foreign:f,__enum__:"cosy.Stmt",toString:g}},f.__params__=["name","params","body","returnType","foreign"],f),If:(f=function(a,b,e){return{_hx_index:8,cond:a,
then:b,el:e,__enum__:"cosy.Stmt",toString:g}},f.__params__=["cond","then","el"],f),Print:(f=function(a,b){return{_hx_index:9,keyword:a,e:b,__enum__:"cosy.Stmt",toString:g}},f.__params__=["keyword","e"],f),Return:(f=function(a,b){return{_hx_index:10,keyword:a,value:b,__enum__:"cosy.Stmt",toString:g}},f.__params__=["keyword","value"],f),Struct:(f=function(a,b){return{_hx_index:11,name:a,declarations:b,__enum__:"cosy.Stmt",toString:g}},f.__params__=["name","declarations"],f),Var:(f=function(a,b,e,d,
f){return{_hx_index:12,name:a,type:b,init:e,mut:d,foreign:f,__enum__:"cosy.Stmt",toString:g}},f.__params__=["name","type","init","mut","foreign"],f)};d=function(a,b){this.structName=a;this.fields=b};d.prototype.clone=function(){for(var a=new h.ds.StringMap,c=h.ds.StringMap.kvIterator(this.fields.h);c.hasNext();){var e=c.next(),d=e.key;e=e.value;e instanceof b.StructInstance&&(e=e.clone());a.h[d]=e}return new b.StructInstance(this.structName,a)};d.prototype.get=function(a){if(Object.prototype.hasOwnProperty.call(this.fields.h,
a.lexeme))return this.fields.h[a.lexeme];throw h.Exception.thrown(new b.RuntimeError(a,'Undefined property "'+a.lexeme+'".'));};d.prototype.set=function(a,c){Object.prototype.hasOwnProperty.call(this.fields.h,a.lexeme)?this.fields.h[a.lexeme]=c:b.Cosy.error(b.ErrorDataType.Token(a),""+a.lexeme+" is not a property of "+a.lexeme)};d.prototype.toString=function(){for(var a=function(a){return"string"==typeof a?'"'+(null==a?"null":u.string(a))+'"':""+(null==a?"null":u.string(a))},b=[],e=h.ds.StringMap.kvIterator(this.fields.h);e.hasNext();){var d=
e.next();b.push(""+d.key+" = "+a(d.value))}b.sort(function(a,b){return a<b?-1:b<a?1:0});return""+this.structName.lexeme+" instance { "+b.join(", ")+" }"};b.StructInstance=d;b.StructInstance.__name__=!0;Object.assign(b.StructInstance.prototype,{__class__:b.StructInstance});d=function(a,b,e,d){this.type=a;this.lexeme=b;this.literal=e;this.line=d};d.prototype.toString=function(){return"Token { type: "+u.string(this.type)+', lexeme: "'+this.lexeme+'"'+(null!=this.literal?", literal: "+(null==this.literal?
"null":u.string(this.literal)):"")+" }"};b.Token=d;b.Token.__name__=!0;Object.assign(b.Token.prototype,{__class__:b.Token});b.TokenType=t["cosy.TokenType"]={__ename__:!0,__constructs__:"LeftParen RightParen LeftBrace RightBrace LeftBracket RightBracket Comma Dot DotDot Underscore Minus MinusEqual Plus PlusEqual Slash SlashEqual Star StarEqual Bang BangEqual Equal EqualEqual Greater GreaterEqual Less LessEqual Identifier String Number And Break Continue Else False Fn For Foreign In If Mut Or Print Return Struct True Var BooleanType NumberType StringType VoidType FunctionType ArrayType Eof".split(" "),
LeftParen:{_hx_index:0,__enum__:"cosy.TokenType",toString:g},RightParen:{_hx_index:1,__enum__:"cosy.TokenType",toString:g},LeftBrace:{_hx_index:2,__enum__:"cosy.TokenType",toString:g},RightBrace:{_hx_index:3,__enum__:"cosy.TokenType",toString:g},LeftBracket:{_hx_index:4,__enum__:"cosy.TokenType",toString:g},RightBracket:{_hx_index:5,__enum__:"cosy.TokenType",toString:g},Comma:{_hx_index:6,__enum__:"cosy.TokenType",toString:g},Dot:{_hx_index:7,__enum__:"cosy.TokenType",toString:g},DotDot:{_hx_index:8,
__enum__:"cosy.TokenType",toString:g},Underscore:{_hx_index:9,__enum__:"cosy.TokenType",toString:g},Minus:{_hx_index:10,__enum__:"cosy.TokenType",toString:g},MinusEqual:{_hx_index:11,__enum__:"cosy.TokenType",toString:g},Plus:{_hx_index:12,__enum__:"cosy.TokenType",toString:g},PlusEqual:{_hx_index:13,__enum__:"cosy.TokenType",toString:g},Slash:{_hx_index:14,__enum__:"cosy.TokenType",toString:g},SlashEqual:{_hx_index:15,__enum__:"cosy.TokenType",toString:g},Star:{_hx_index:16,__enum__:"cosy.TokenType",
toString:g},StarEqual:{_hx_index:17,__enum__:"cosy.TokenType",toString:g},Bang:{_hx_index:18,__enum__:"cosy.TokenType",toString:g},BangEqual:{_hx_index:19,__enum__:"cosy.TokenType",toString:g},Equal:{_hx_index:20,__enum__:"cosy.TokenType",toString:g},EqualEqual:{_hx_index:21,__enum__:"cosy.TokenType",toString:g},Greater:{_hx_index:22,__enum__:"cosy.TokenType",toString:g},GreaterEqual:{_hx_index:23,__enum__:"cosy.TokenType",toString:g},Less:{_hx_index:24,__enum__:"cosy.TokenType",toString:g},LessEqual:{_hx_index:25,
__enum__:"cosy.TokenType",toString:g},Identifier:{_hx_index:26,__enum__:"cosy.TokenType",toString:g},String:{_hx_index:27,__enum__:"cosy.TokenType",toString:g},Number:{_hx_index:28,__enum__:"cosy.TokenType",toString:g},And:{_hx_index:29,__enum__:"cosy.TokenType",toString:g},Break:{_hx_index:30,__enum__:"cosy.TokenType",toString:g},Continue:{_hx_index:31,__enum__:"cosy.TokenType",toString:g},Else:{_hx_index:32,__enum__:"cosy.TokenType",toString:g},False:{_hx_index:33,__enum__:"cosy.TokenType",toString:g},
Fn:{_hx_index:34,__enum__:"cosy.TokenType",toString:g},For:{_hx_index:35,__enum__:"cosy.TokenType",toString:g},Foreign:{_hx_index:36,__enum__:"cosy.TokenType",toString:g},In:{_hx_index:37,__enum__:"cosy.TokenType",toString:g},If:{_hx_index:38,__enum__:"cosy.TokenType",toString:g},Mut:{_hx_index:39,__enum__:"cosy.TokenType",toString:g},Or:{_hx_index:40,__enum__:"cosy.TokenType",toString:g},Print:{_hx_index:41,__enum__:"cosy.TokenType",toString:g},Return:{_hx_index:42,__enum__:"cosy.TokenType",toString:g},
Struct:{_hx_index:43,__enum__:"cosy.TokenType",toString:g},True:{_hx_index:44,__enum__:"cosy.TokenType",toString:g},Var:{_hx_index:45,__enum__:"cosy.TokenType",toString:g},BooleanType:{_hx_index:46,__enum__:"cosy.TokenType",toString:g},NumberType:{_hx_index:47,__enum__:"cosy.TokenType",toString:g},StringType:{_hx_index:48,__enum__:"cosy.TokenType",toString:g},VoidType:{_hx_index:49,__enum__:"cosy.TokenType",toString:g},FunctionType:{_hx_index:50,__enum__:"cosy.TokenType",toString:g},ArrayType:{_hx_index:51,
__enum__:"cosy.TokenType",toString:g},Eof:{_hx_index:52,__enum__:"cosy.TokenType",toString:g}};d=function(){this.isInClass=!1;this.indentAmount=0};d.prototype.indent=function(){for(var a=[],b=0,e=this.indentAmount;b<e;)++b,a.push("  ");return a.join("")};d.prototype.printBlock=function(a){this.indentAmount++;for(var b=[],e=0;e<a.length;){var d=a[e++];b.push(this.indent()+this.printStmt(d))}a=b.join("\n");this.indentAmount--;return"{\n"+a+"\n"+this.indent()+"}"};d.prototype.printExprBlock=function(a){this.indentAmount++;
for(var b=[],e=0;e<a.length;){var d=a[e++];b.push(this.indent()+this.printExpr(d))}a=b.join("\n");this.indentAmount--;return"{\n"+a+"\n"+this.indent()+"}"};d.prototype.printStmt=function(a){switch(a._hx_index){case 0:return this.printBlock(a.statements);case 1:return a.keyword.lexeme;case 2:return a.keyword.lexeme;case 3:return""+this.printExpr(a.e);case 4:var b=a.name;return"for "+(null!=b?b.lexeme+" in ":"")+this.printExpr(a.from)+".."+this.printExpr(a.to)+" "+this.printBlock(a.body);case 5:return"for "+
a.name.lexeme+" in "+this.printExpr(a.array)+" "+this.printBlock(a.body);case 6:return b=a.cond,"for "+(null!=b?this.printExpr(b):"")+" "+this.printBlock(a.body);case 7:b=a.foreign;var e=a.body,d=a.params;a=""+(this.isInClass?"":b?"foreign fn":"fn")+" "+a.name.lexeme;for(var f=[],g=0;g<d.length;)f.push(this.formatParam(d[g++]));d=f.join(", ");return b?""+a+"("+d+")":""+a+"("+d+") "+this.printBlock(e);case 8:return b=a.el,"if "+this.printExpr(a.cond)+" "+this.printStmt(a.then)+(null!=b?" else "+this.printStmt(b):
"");case 9:return""+a.keyword.lexeme+" "+this.printExpr(a.e);case 10:return b=a.value,a.keyword.lexeme+(null!=b?" "+this.printExpr(b):"");case 11:return"struct "+a.name.lexeme+" "+this.printBlock(a.declarations);case 12:return b=a.init,""+(a.foreign?"foreign ":"")+(a.mut?"mut":"var")+" "+a.name.lexeme+(null!=b?" = "+this.printExpr(b):"")}};d.prototype.printExpr=function(a){switch(a._hx_index){case 0:var c=a.exprs;a=[];for(var e=0;e<c.length;)a.push(this.printExpr(c[e++]));return"["+a.join(",")+"]";
case 1:return""+a.name.lexeme+" "+a.op.lexeme+" "+this.printExpr(a.value);case 2:return""+this.printExpr(a.left)+" "+a.op.lexeme+" "+this.printExpr(a.right);case 3:c=a.$arguments;a=""+this.printExpr(a.callee)+"(";e=[];for(var d=0;d<c.length;)e.push(this.printExpr(c[d++]));return a+e.join(", ")+")";case 4:return""+this.printExpr(a.obj)+"."+a.name.lexeme;case 5:return"("+this.printExpr(a.e)+")";case 6:return c=a.v,"string"==typeof c?"'"+(null==c?"null":u.string(c))+"'":""+(null==c?"null":u.string(c));
case 7:return""+this.printExpr(a.left)+" "+(40==a.op.type._hx_index?"or":"and")+" "+this.printExpr(a.right);case 8:return"mut "+a.name.lexeme;case 9:return""+this.printExpr(a.obj)+"."+a.name.lexeme+" = "+this.printExpr(a.value);case 10:return this.printExprBlock(a.decls);case 11:return""+a.op.lexeme+this.printExpr(a.right);case 12:return a.name.lexeme;case 13:c=a.body;a=a.params;e=[];for(d=0;d<a.length;)e.push(this.formatParam(a[d++]));return"fn ("+e.join(",")+") "+this.printStmt(b.Stmt.Block(c))}};
d.prototype.formatType=function(a){switch(a._hx_index){case 0:return"";case 2:return"Bool";case 3:return"Num";case 4:return"Str";case 6:a=a.paramTypes;for(var b=[],e=0;e<a.length;)b.push(this.formatType(a[e++]));return"Fn("+b.join(", ")+")";case 7:return q.trim("Array "+this.formatType(a.type));default:return""+u.string(a)}};d.prototype.formatParam=function(a){var b=this.formatType(a.type);return a.name.lexeme+(""!=b?" "+b:"")};b.phases.AstPrinter=d;b.phases.AstPrinter.__name__=!0;Object.assign(b.phases.AstPrinter.prototype,
{__class__:b.phases.AstPrinter});d=function(a,b){this.arityValue=a;this.method=b};d.prototype.arity=function(){return this.arityValue};d.prototype.call=function(a,b){return this.method(b)};d.prototype.toString=function(){return"<native fn>"};b.phases._Interpreter.CustomCallable=d;b.phases._Interpreter.CustomCallable.__name__=!0;b.phases._Interpreter.CustomCallable.__interfaces__=[b.Callable];Object.assign(b.phases._Interpreter.CustomCallable.prototype,{__class__:b.phases._Interpreter.CustomCallable});
d=function(){this.classNames=[];this.isInClass=!1;this.indentAmount=0};d.prototype.indent=function(){for(var a=[],b=0,e=this.indentAmount;b<e;)++b,a.push("  ");return a.join("")};d.prototype.printBlock=function(a){this.indentAmount++;for(var b=[],e=0;e<a.length;){var d=a[e++];b.push(this.indent()+this.printStmt(d))}a=b.join("\n");this.indentAmount--;return"{\n"+a+"\n"+this.indent()+"}"};d.prototype.printStmt=function(a){switch(a._hx_index){case 0:return this.printBlock(a.statements);case 1:return"break;";
case 2:return"continue;";case 3:return""+this.printExpr(a.e)+";";case 4:var c=a.name;c=null!=c?c.lexeme:"__i";return"for (var "+c+" = "+this.printExpr(a.from)+"; "+c+" < "+this.printExpr(a.to)+"; "+c+"++) "+this.printBlock(a.body);case 5:return"for ("+a.name.lexeme+" of "+this.printExpr(a.array)+") "+this.printBlock(a.body);case 6:return c=a.cond,"while ("+(null!=c?this.printExpr(c):"true")+") "+this.printBlock(a.body);case 7:c=a.body;var e=a.params;if(a.foreign)return"";a=""+(this.isInClass?"":"function ")+
a.name.lexeme;for(var d=[],f=0;f<e.length;)d.push(e[f++].name.lexeme);return""+a+"("+d.join(",")+") "+this.printStmt(b.Stmt.Block(c));case 8:return c=a.el,"if ("+this.printExpr(a.cond)+") "+this.printStmt(a.then)+(null!=c?" else "+this.printStmt(c):"");case 9:return"console.log("+this.printExpr(a.e)+");";case 10:return a=a.value,"return"+(null!=a?" "+this.printExpr(a):"")+";";case 11:return"// "+a.name.lexeme+" struct";case 12:return c=a.init,a.foreign?"":""+(a.mut?"var":"const")+" "+a.name.lexeme+
(null!=c?" = "+this.printExpr(c):"")+";"}};d.prototype.printExpr=function(a){switch(a._hx_index){case 0:var c=a.exprs;a=n(this,this.printExpr);for(var e=Array(c.length),d=0,f=c.length;d<f;){var g=d++;e[g]=a(c[g])}return"["+e.join(", ")+"]";case 1:return""+a.name.lexeme+" "+a.op.lexeme+" "+this.printExpr(a.value);case 2:return c=a.op,""+this.printExpr(a.left)+" "+(21==c.type._hx_index?"===":c.lexeme)+" "+this.printExpr(a.right);case 3:c=a.$arguments;e=this.printExpr(a.callee);a=-1!=this.classNames.indexOf(e)?
"new ":"";e=""+e+"(";d=n(this,this.printExpr);f=Array(c.length);g=0;for(var h=c.length;g<h;){var k=g++;f[k]=d(c[k])}return a+(e+f.join(",")+")");case 4:return""+this.printExpr(a.obj)+"."+a.name.lexeme;case 5:return"("+this.printExpr(a.e)+")";case 6:return c=a.v,null==c?"null":"string"==typeof c?'"'+(null==c?"null":u.string(c))+'"':""+(null==c?"null":u.string(c));case 7:return""+this.printExpr(a.left)+" "+(40==a.op.type._hx_index?"||":"&&")+" "+this.printExpr(a.right);case 8:return a.name.lexeme;case 9:return""+
this.printExpr(a.obj)+"."+a.name.lexeme+" = "+this.printExpr(a.value);case 10:c=a.decls;a=[];for(e=0;e<c.length;)a.push(q.replace(this.printExpr(c[e++])," = ",": "));return"{ "+a.join(", ")+" }";case 11:return""+a.op.lexeme+this.printExpr(a.right);case 12:return a.name.lexeme;case 13:c=a.body;a=a.params;e=[];for(d=0;d<a.length;)e.push(a[d++].name.lexeme);return"function ("+e.join(", ")+") "+this.printStmt(b.Stmt.Block(c))}};b.phases.JavaScriptPrinter=d;b.phases.JavaScriptPrinter.__name__=!0;Object.assign(b.phases.JavaScriptPrinter.prototype,
{__class__:b.phases.JavaScriptPrinter});d=function(){};d.prototype.optimizeStmts=function(a){for(var b=[],e=0;e<a.length;)b.push(this.optimizeStmt(a[e++]));return b};d.prototype.optimizeStmt=function(a){switch(a._hx_index){case 0:return b.Stmt.Block(this.optimizeStmts(a.statements));case 3:return b.Stmt.Expression(this.optimizeExpr(a.e));case 8:var c=a.el;return b.Stmt.If(this.optimizeExpr(a.cond),this.optimizeStmt(a.then),null!=c?this.optimizeStmt(c):null);case 9:return b.Stmt.Print(a.keyword,this.optimizeExpr(a.e));
case 10:return c=a.value,b.Stmt.Return(a.keyword,null!=c?this.optimizeExpr(c):null);case 12:return c=a.init,b.Stmt.Var(a.name,a.type,null!=c?this.optimizeExpr(c):c,a.mut,a.foreign);default:return a}};d.prototype.optimizeExpr=function(a){switch(a._hx_index){case 2:var c=a.op,e=this.optimizeExpr(a.left);a=this.optimizeExpr(a.right);if(6==e._hx_index){var d=e.v;if(6==a._hx_index){var f=a.v;if("number"==typeof d&&"number"==typeof f){switch(c.type._hx_index){case 10:c=d-f;break;case 12:c=d+f;break;case 14:c=
d/f;break;case 16:c=d*f;break;case 19:c=d!=f;break;case 21:c=d==f;break;case 22:c=d>f;break;case 23:c=d>=f;break;case 24:c=d<f;break;case 25:c=d<=f;break;default:return b.Cosy.error(b.ErrorDataType.Token(c),"Invalid operator."),b.Expr.Binary(e,c,a)}return b.Expr.Literal(c)}return"string"==typeof d&&"string"==typeof f?b.Expr.Literal(d+f):b.Expr.Binary(e,c,a)}}return b.Expr.Binary(e,c,a);case 7:c=a.op;e=this.optimizeExpr(a.left);a=this.optimizeExpr(a.right);if(6==e._hx_index&&(d=e.v,6==a._hx_index&&
(f=a.v,"boolean"==typeof d&&"boolean"==typeof f))){switch(c.type._hx_index){case 29:c=d&&f;break;case 40:c=d||f;break;default:return b.Cosy.error(b.ErrorDataType.Token(c),"Invalid operator."),b.Expr.Binary(e,c,a)}return b.Expr.Literal(c)}return b.Expr.Logical(e,c,a);default:return a}};b.phases.Optimizer=d;b.phases.Optimizer.__name__=!0;Object.assign(b.phases.Optimizer.prototype,{__class__:b.phases.Optimizer});d=function(a){this.current=0;this.structNames=[];this.tokens=a};d.prototype.parse=function(){for(var a=
[];!this.isAtEnd();)a.push(this.declaration());return a};d.prototype.expression=function(){return this.assignment()};d.prototype.declaration=function(){try{if(this.match([b.TokenType.Struct]))return this.structDeclaration();var a=this.match([b.TokenType.Foreign]);return this.match([b.TokenType.Fn])?this.func("function",a):this.match([b.TokenType.Var])?this.varDeclaration(!1,a):this.match([b.TokenType.Mut])?this.varDeclaration(!0,a):this.statement()}catch(c){if(h.Exception.caught(c).unwrap()instanceof
b.phases._Parser.ParseError)return this.synchronize(),null;throw c;}};d.prototype.statement=function(){return this.match([b.TokenType.For])?this.forStatement():this.match([b.TokenType.If])?this.ifStatement():this.match([b.TokenType.Print])?this.printStatement():this.match([b.TokenType.Return])?this.returnStatement():this.match([b.TokenType.Break])?b.Stmt.Break(this.previous()):this.match([b.TokenType.Continue])?b.Stmt.Continue(this.previous()):this.match([b.TokenType.LeftBrace])?b.Stmt.Block(this.block()):
this.expressionStatement()};d.prototype.forStatement=function(){if(this.checkUntil(b.TokenType.DotDot,b.TokenType.LeftBrace)){var a=this.previous(),c=null;this.check(b.TokenType.Identifier)&&(c=this.consume(b.TokenType.Identifier,"Expect variable name."),q.startsWith(c.lexeme,"_")&&this.error(c,"Loop counters cannot be marked as unused. Use `for min...max` syntax instead."),this.consume(b.TokenType.In,'Expect "in" after for loop identifier.'));var e=this.expression();this.consume(b.TokenType.DotDot,
'Expect ".." between from and to numbers.');var d=this.expression();this.consume(b.TokenType.LeftBrace,'Expect "{" before loop body.');return b.Stmt.For(a,c,e,d,this.block())}if(this.checkUntil(b.TokenType.In,b.TokenType.LeftBrace))return a=this.consume(b.TokenType.Identifier,"Expect variable name."),this.consume(b.TokenType.In,'Expect "in" after for loop identifier.'),c=this.expression(),this.consume(b.TokenType.LeftBrace,'Expect "{" before loop body.'),b.Stmt.ForArray(a,c,this.block());a=this.check(b.TokenType.LeftBrace)?
null:this.expression();this.consume(b.TokenType.LeftBrace,'Expect "{" before loop body.');return b.Stmt.ForCondition(a,this.block())};d.prototype.ifStatement=function(){return b.Stmt.If(this.expression(),this.statement(),this.match([b.TokenType.Else])?this.statement():null)};d.prototype.printStatement=function(){return b.Stmt.Print(this.previous(),this.expression())};d.prototype.returnStatement=function(){return b.Stmt.Return(this.previous(),this.match([b.TokenType.Underscore])?null:this.expression())};
d.prototype.expressionStatement=function(){return b.Stmt.Expression(this.expression())};d.prototype.block=function(){for(var a=[];!this.check(b.TokenType.RightBrace)&&!this.isAtEnd();)a.push(this.declaration());this.consume(b.TokenType.RightBrace,'Expect "}" after block.');return a};d.prototype.varDeclaration=function(a,c){var e=this.consume(b.TokenType.Identifier,"Expect variable name."),d=this.paramType(),f=null;!c&&this.match([b.TokenType.Equal])&&(f=this.expression());return b.Stmt.Var(e,d,f,
a,c)};d.prototype.structDeclaration=function(){var a=this.consume(b.TokenType.Identifier,"Expect class name");this.consume(b.TokenType.LeftBrace,'Expect "{" before struct body.');for(var c=[];!this.check(b.TokenType.RightBrace)&&!this.isAtEnd();)if(this.match([b.TokenType.Var]))c.push(this.varDeclaration(!1,!1));else if(this.match([b.TokenType.Mut]))c.push(this.varDeclaration(!0,!1));else{b.Cosy.error(b.ErrorDataType.Token(this.tokens[this.current]),"Structs can only contain variable definitions.");
break}this.structNames.push(a.lexeme);this.consume(b.TokenType.RightBrace,'Expect "}" after struct body.');return b.Stmt.Struct(a,c)};d.prototype.func=function(a,c){var e=this.consume(b.TokenType.Identifier,"Expect "+a+" name.");a=this.funcBody(a,c);if(13==a._hx_index)return b.Stmt.Function(e,a.params,a.body,a.returnType,c);throw h.Exception.thrown(new b.RuntimeError(e,"Invalid function declaration."));};d.prototype.paramType=function(){if(this.match([b.TokenType.BooleanType]))return b.phases.VariableType.Boolean;
if(this.match([b.TokenType.NumberType]))return b.phases.VariableType.Number;if(this.match([b.TokenType.StringType]))return b.phases.VariableType.Text;if(this.match([b.TokenType.VoidType]))return b.phases.VariableType.Void;if(this.match([b.TokenType.FunctionType])){this.consume(b.TokenType.LeftParen,'Expect "(" after Fun.');for(var a=[];!this.check(b.TokenType.RightParen)&&(a.push(this.paramType()),this.match([b.TokenType.Comma])););this.consume(b.TokenType.RightParen,'Expect ")" after parameters.');
var c=this.paramType();0==c._hx_index&&(c=b.phases.VariableType.Void);return b.phases.VariableType.Function(a,c)}return this.match([b.TokenType.ArrayType])?b.phases.VariableType.Array(this.paramType()):this.check(b.TokenType.Identifier)&&-1!=this.structNames.indexOf(this.peek().lexeme)?b.phases.VariableType.NamedStruct(this.advance().lexeme):b.phases.VariableType.Unknown};d.prototype.funcBody=function(a,c){this.consume(b.TokenType.LeftParen,'Expect "(" after '+a+" name.");var e=[];if(!this.check(b.TokenType.RightParen))for(;;){255<=
e.length&&this.error(this.peek(),"Cannot have more than 255 parameters.");var d=this.match([b.TokenType.Mut]),f=this.consume(b.TokenType.Identifier,"Expect parameter name."),g=this.paramType();d&&(9!=g._hx_index&&0!=g._hx_index&&this.error(f,"Only struct parameters can be marked as `mut`."),g=b.phases.VariableType.Mutable(g));e.push({name:f,type:g});if(!this.match([b.TokenType.Comma]))break}this.consume(b.TokenType.RightParen,'Expect ")" after parameters.');d=this.paramType();if(c)return b.Expr.AnonFunction(e,
[],d);this.consume(b.TokenType.LeftBrace,'Expect "{" before '+a+" body");return b.Expr.AnonFunction(e,this.block(),d)};d.prototype.assignment=function(){var a=this.or();if(this.match([b.TokenType.Equal,b.TokenType.PlusEqual,b.TokenType.MinusEqual,b.TokenType.SlashEqual,b.TokenType.StarEqual])){var c=this.previous(),e=this.assignment();switch(a._hx_index){case 4:return b.Expr.Set(a.obj,a.name,e);case 12:return b.Expr.Assign(a.name,c,e)}this.error(c,"Invalid assignment target.")}return a};d.prototype.or=
function(){for(var a=this.and();this.match([b.TokenType.Or]);)a=b.Expr.Logical(a,this.previous(),this.and());return a};d.prototype.and=function(){for(var a=this.equality();this.match([b.TokenType.And]);)a=b.Expr.Logical(a,this.previous(),this.equality());return a};d.prototype.equality=function(){for(var a=this.comparison();this.match([b.TokenType.BangEqual,b.TokenType.EqualEqual]);)a=b.Expr.Binary(a,this.previous(),this.comparison());return a};d.prototype.comparison=function(){for(var a=this.addition();this.match([b.TokenType.Greater,
b.TokenType.GreaterEqual,b.TokenType.Less,b.TokenType.LessEqual]);)a=b.Expr.Binary(a,this.previous(),this.addition());return a};d.prototype.addition=function(){for(var a=this.multiplication();this.match([b.TokenType.Minus,b.TokenType.Plus]);)a=b.Expr.Binary(a,this.previous(),this.multiplication());return a};d.prototype.multiplication=function(){for(var a=this.unary();this.match([b.TokenType.Star,b.TokenType.Slash]);)a=b.Expr.Binary(a,this.previous(),this.multiplication());return a};d.prototype.unary=
function(){return this.match([b.TokenType.Bang,b.TokenType.Minus])?b.Expr.Unary(this.previous(),this.unary()):this.call()};d.prototype.call=function(){for(var a=this.primary();;)if(this.match([b.TokenType.LeftParen]))a=this.finishCall(a);else if(this.match([b.TokenType.Dot]))a=b.Expr.Get(a,this.consume(b.TokenType.Identifier,'Expect property name after ".".'));else break;return a};d.prototype.finishCall=function(a){var c=[];if(!this.check(b.TokenType.RightParen))for(;255<=c.length&&this.error(this.peek(),
"Cannot have more than 255 arguments"),c.push(this.expression()),this.match([b.TokenType.Comma]););return b.Expr.Call(a,this.consume(b.TokenType.RightParen,'Expect ")" after arguments.'),c)};d.prototype.primary=function(){if(this.match([b.TokenType.False]))return b.Expr.Literal(!1);if(this.match([b.TokenType.True]))return b.Expr.Literal(!0);if(this.match([b.TokenType.Number,b.TokenType.String]))return b.Expr.Literal(this.previous().literal);if(this.match([b.TokenType.Fn]))return this.funcBody("function",
!1);if(this.match([b.TokenType.Identifier]))return this.identifier();if(this.match([b.TokenType.Mut]))return b.Expr.MutArgument(this.previous(),this.consume(b.TokenType.Identifier,'Expect variable name after "mut".'));if(this.match([b.TokenType.LeftParen])){var a=this.expression();this.consume(b.TokenType.RightParen,'Expect ")" after expression.');return b.Expr.Grouping(a)}if(this.match([b.TokenType.LeftBracket]))return this.arrayLiteral();throw h.Exception.thrown(this.error(this.peek(),"Expect expression."));
};d.prototype.arrayLiteral=function(){for(var a=this.previous(),c=[];!this.check(b.TokenType.RightBracket)&&!this.isAtEnd();)c.push(this.expression()),this.check(b.TokenType.RightBracket)||this.consume(b.TokenType.Comma,'Expect "," between array values.');this.consume(b.TokenType.RightBracket,'Expect "]" after array literal.');return b.Expr.ArrayLiteral(a,c)};d.prototype.identifier=function(){var a=this.previous();if(this.check(b.TokenType.LeftBrace)&&-1!=this.structNames.indexOf(a.lexeme)){this.consume(b.TokenType.LeftBrace,
'Expect "{" after struct name.');for(var c=[];!this.match([b.TokenType.RightBrace])&&!this.isAtEnd();)c.push(this.assignment()),this.check(b.TokenType.RightBrace)||this.consume(b.TokenType.Comma,'Expect "," between variable initializers.');return b.Expr.StructInit(a,c)}return b.Expr.Variable(a)};d.prototype.consume=function(a,b){if(this.check(a))return this.advance();throw h.Exception.thrown(this.error(this.peek(),b));};d.prototype.match=function(a){for(var b=0;b<a.length;)if(this.check(a[b++]))return this.advance(),
!0;return!1};d.prototype.check=function(a){return this.isAtEnd()?!1:this.peek().type==a};d.prototype.checkUntil=function(a,c){for(var e=this.current;;){if(this.tokens[e].type==a)return!0;++e;if(this.tokens[e].type==c||this.tokens[e].type==b.TokenType.Eof)break}return!1};d.prototype.advance=function(){this.isAtEnd()||this.current++;return this.previous()};d.prototype.isAtEnd=function(){return this.peek().type==b.TokenType.Eof};d.prototype.peek=function(){return this.tokens[this.current]};d.prototype.previous=
function(){return this.tokens[this.current-1]};d.prototype.error=function(a,c){b.Cosy.error(b.ErrorDataType.Token(a),c);return new b.phases._Parser.ParseError};d.prototype.synchronize=function(){for(this.advance();!this.isAtEnd();)switch(this.peek().type._hx_index){case 30:case 31:case 34:case 35:case 36:case 38:case 41:case 42:case 43:case 45:return;default:this.advance()}};b.phases.Parser=d;b.phases.Parser.__name__=!0;Object.assign(b.phases.Parser.prototype,{__class__:b.phases.Parser});b.phases._Parser=
{};d=function(a){return b.Error.call(this,a)||this};$jscomp.inherits(d,b.Error);b.phases._Parser.ParseError=d;b.phases._Parser.ParseError.__name__=!0;b.phases._Parser.ParseError.__super__=b.Error;Object.assign(b.phases._Parser.ParseError.prototype,{__class__:b.phases._Parser.ParseError});d=function(a){this.currentStruct=b.phases._Resolver.StructType.None;this.currentFunction=b.phases._Resolver.FunctionType.None;this.scopes=[];this.interpreter=a};d.prototype.resolveStmts=function(a){for(var c=null,
e=0;e<a.length;){var d=a[e];++e;switch(d._hx_index){case 1:c=d.keyword;break;case 2:c=d.keyword;break;case 10:c=d.keyword;break;default:null!=c&&(b.Cosy.error(b.ErrorDataType.Token(c),"Unreachable code after return statement."),c=null)}this.resolveStmt(d)}};d.prototype.resolveStmt=function(a){for(;;){switch(a._hx_index){case 0:this.beginScope();this.resolveStmts(a.statements);this.endScope();break;case 3:this.resolveExpr(a.e);break;case 4:var c=a.body,e=a.name;this.resolveExpr(a.from);this.resolveExpr(a.to);
this.beginScope();null!=e&&(this.declare(e),this.define(e));0==c.length&&b.Cosy.error(b.ErrorDataType.Token(a.keyword),"Loop body is empty.");this.resolveStmts(c);this.endScope();break;case 5:c=a.body;e=a.name;this.resolveExpr(a.array);this.beginScope();this.declare(e);this.define(e);0==c.length&&b.Cosy.error(b.ErrorDataType.Token(e),"Loop body is empty.");this.resolveStmts(c);this.endScope();break;case 6:c=a.cond;null!=c&&this.resolveExpr(c);this.beginScope();this.resolveStmts(a.body);this.endScope();
break;case 7:c=a.foreign;e=a.name;c&&!Object.prototype.hasOwnProperty.call(b.Cosy.foreignFunctions.h,e.lexeme)&&b.Cosy.error(b.ErrorDataType.Token(e),"Foreign function not set.");this.declare(e);this.define(e);this.resolveFunction(e,a.params,a.body,b.phases._Resolver.FunctionType.Function,c);break;case 8:c=a.el;this.resolveExpr(a.cond);this.resolveStmt(a.then);if(null!=c){a=c;continue}break;case 9:this.resolveExpr(a.e);break;case 10:c=a.value;a=a.keyword;this.currentFunction==b.phases._Resolver.FunctionType.None&&
b.Cosy.error(b.ErrorDataType.Token(a),"Cannot return from top-level code.");null!=c&&(this.currentFunction==b.phases._Resolver.FunctionType.Initializer&&b.Cosy.error(b.ErrorDataType.Token(a),"Cannot return value from an initializer."),this.resolveExpr(c));break;case 11:c=a.name;this.declare(c);this.define(c);this.currentStruct=b.phases._Resolver.StructType.Struct;this.beginScope();this.resolveStmts(a.declarations);this.endScope();this.currentStruct=b.phases._Resolver.StructType.None;break;case 12:c=
a.mut;e=a.init;var d=a.name;a.foreign&&!Object.prototype.hasOwnProperty.call(b.Cosy.foreignVariables.h,d.lexeme)&&b.Cosy.error(b.ErrorDataType.Token(d),"Foreign variable not set.");a=1==this.currentStruct._hx_index;this.declare(d,c,a);null!=e&&this.resolveExpr(e);this.define(d,c,a)}break}};d.prototype.resolveExpr=function(a){for(;;){switch(a._hx_index){case 0:a=a.exprs;for(var c=0;c<a.length;)this.resolveExpr(a[c++]);break;case 1:c=a.name;var e=this.findInScopes(c);null==e||e.mutable||b.Cosy.error(b.ErrorDataType.Token(c),
"Cannot reassign non-mutable variable.");this.resolveExpr(a.value);this.resolveLocal(a,c,!1);break;case 2:this.resolveExpr(a.left);a=a.right;continue;case 3:c=a.$arguments;this.resolveExpr(a.callee);for(a=0;a<c.length;)this.resolveExpr(c[a++]);break;case 4:a=a.obj;continue;case 5:a=a.e;continue;case 7:this.resolveExpr(a.left);a=a.right;continue;case 8:this.resolveLocal(a,a.name,!0);break;case 9:c=a.name;e=a.obj;this.resolveExpr(a.value);this.resolveExpr(e);switch(e._hx_index){case 4:break;case 12:a=
this.findInScopes(e.name);null==a||a.mutable||b.Cosy.error(b.ErrorDataType.Token(c),"Cannot reassign properties on non-mutable struct.");break;default:throw h.Exception.thrown("this is unexpected");}break;case 10:c=a.decls;e=a.name;for(var d=0;d<c.length;){var f=c[d];++d;1==f._hx_index&&this.resolveExpr(f.value)}this.resolveLocal(a,e,!0);break;case 11:a=a.right;continue;case 12:c=a.name;e=this.scopes;Object.prototype.hasOwnProperty.call(e[e.length-1].h,c.lexeme)?(e=this.scopes,e=0==e[e.length-1].h[c.lexeme].state._hx_index):
e=!1;e&&b.Cosy.error(b.ErrorDataType.Token(c),"Cannot read local variable in its own initializer");q.startsWith(c.lexeme,"_")&&b.Cosy.error(b.ErrorDataType.Token(c),"Variables starting with _ are considered unused.");this.resolveLocal(a,c,!0);break;case 13:this.resolveFunction(null,a.params,a.body,b.phases._Resolver.FunctionType.Function,!1)}break}};d.prototype.resolveFunction=function(a,b,e,d,f){a=this.currentFunction;this.currentFunction=d;this.beginScope();for(d=0;d<b.length;){var c=b[d];++d;var g=
10==c.type._hx_index;this.declare(c.name,g);f||this.define(c.name,g)}this.resolveStmts(e);this.endScope();this.currentFunction=a};d.prototype.beginScope=function(){this.scopes.push(new h.ds.StringMap)};d.prototype.endScope=function(){for(var a=h.ds.StringMap.kvIterator(this.scopes.pop().h);a.hasNext();){var c=a.next().value;q.startsWith(c.name.lexeme,"_")||c.member||1!=c.state._hx_index||b.Cosy.error(b.ErrorDataType.Token(c.name),"Local variable is not used.")}};d.prototype.declare=function(a,c,e){null==
e&&(e=!1);null==c&&(c=!1);var d=this.scopes;d=d[d.length-1];Object.prototype.hasOwnProperty.call(d.h,a.lexeme)?b.Cosy.error(b.ErrorDataType.Token(a),"Variable with this name already declared in this scope."):null!=this.findInScopes(a)&&b.Cosy.error(b.ErrorDataType.Token(a),"Shadows existing variable.");d.h[a.lexeme]={name:a,state:b.phases._Resolver.VariableState.Declared,mutable:c,member:e}};d.prototype.define=function(a,c,e){null==e&&(e=!1);null==c&&(c=!1);var d=this.scopes;d[d.length-1].h[a.lexeme]=
{name:a,state:b.phases._Resolver.VariableState.Defined,mutable:c,member:e}};d.prototype.resolveLocal=function(a,c,e){for(var d=this.scopes.length-1;0<=d;){var f=this.scopes[d];if(Object.prototype.hasOwnProperty.call(f.h,c.lexeme)){this.interpreter.resolve(a,this.scopes.length-1-d);e&&(f.h[c.lexeme].state=b.phases._Resolver.VariableState.Read);return}--d}"clock"!=c.lexeme&&"random"!=c.lexeme&&b.Cosy.error(b.ErrorDataType.Token(c),"Variable not declared in this scope.")};d.prototype.findInScopes=function(a){a=
a.lexeme;for(var b=this.scopes.length-1;0<=b;){var e=this.scopes[b];if(Object.prototype.hasOwnProperty.call(e.h,a))return e.h[a];--b}return null};b.phases.Resolver=d;b.phases.Resolver.__name__=!0;Object.assign(b.phases.Resolver.prototype,{__class__:b.phases.Resolver});b.phases._Resolver={};b.phases._Resolver.VariableState=t["cosy.phases._Resolver.VariableState"]={__ename__:!0,__constructs__:["Declared","Defined","Read"],Declared:{_hx_index:0,__enum__:"cosy.phases._Resolver.VariableState",toString:g},
Defined:{_hx_index:1,__enum__:"cosy.phases._Resolver.VariableState",toString:g},Read:{_hx_index:2,__enum__:"cosy.phases._Resolver.VariableState",toString:g}};b.phases._Resolver.FunctionType=t["cosy.phases._Resolver.FunctionType"]={__ename__:!0,__constructs__:["None","Method","Initializer","Function"],None:{_hx_index:0,__enum__:"cosy.phases._Resolver.FunctionType",toString:g},Method:{_hx_index:1,__enum__:"cosy.phases._Resolver.FunctionType",toString:g},Initializer:{_hx_index:2,__enum__:"cosy.phases._Resolver.FunctionType",
toString:g},Function:{_hx_index:3,__enum__:"cosy.phases._Resolver.FunctionType",toString:g}};b.phases._Resolver.StructType=t["cosy.phases._Resolver.StructType"]={__ename__:!0,__constructs__:["None","Struct"],None:{_hx_index:0,__enum__:"cosy.phases._Resolver.StructType",toString:g},Struct:{_hx_index:1,__enum__:"cosy.phases._Resolver.StructType",toString:g}};d=function(a){this.line=1;this.start=this.current=0;this.tokens=[];this.source=a};d.prototype.scanTokens=function(){for(;!this.isAtEnd();)this.start=
this.current,this.scanToken();this.tokens.push(new b.Token(b.TokenType.Eof,"",null,this.line));return this.tokens};d.prototype.scanToken=function(){var a=this.advance();switch(a){case 10:this.line++;break;case 9:case 13:case 32:break;case 33:this.addToken(this.match(61)?b.TokenType.BangEqual:b.TokenType.Bang);break;case 39:this.string();break;case 40:this.addToken(b.TokenType.LeftParen);break;case 41:this.addToken(b.TokenType.RightParen);break;case 42:this.addToken(this.match(61)?b.TokenType.StarEqual:
b.TokenType.Star);break;case 43:this.addToken(this.match(61)?b.TokenType.PlusEqual:b.TokenType.Plus);break;case 44:this.addToken(b.TokenType.Comma);break;case 45:this.addToken(this.match(61)?b.TokenType.MinusEqual:b.TokenType.Minus);break;case 46:this.addToken(this.match(46)?b.TokenType.DotDot:b.TokenType.Dot);break;case 47:if(this.match(47))for(;10!=this.peek()&&!this.isAtEnd();)this.advance();else this.addToken(this.match(61)?b.TokenType.SlashEqual:b.TokenType.Slash);break;case 60:this.addToken(this.match(61)?
b.TokenType.LessEqual:b.TokenType.Less);break;case 61:this.addToken(this.match(61)?b.TokenType.EqualEqual:b.TokenType.Equal);break;case 62:this.addToken(this.match(61)?b.TokenType.GreaterEqual:b.TokenType.Greater);break;case 91:this.addToken(b.TokenType.LeftBracket);break;case 93:this.addToken(b.TokenType.RightBracket);break;case 95:this.isAlpha(this.peek())?this.isDigit(a)?this.number():this.isAlpha(a)?this.identifier():b.Cosy.error(b.ErrorDataType.Line(this.line),"Unexpected character: "+String.fromCodePoint(a)):
this.addToken(b.TokenType.Underscore);break;case 123:this.addToken(b.TokenType.LeftBrace);break;case 125:this.addToken(b.TokenType.RightBrace);break;default:this.isDigit(a)?this.number():this.isAlpha(a)?this.identifier():b.Cosy.error(b.ErrorDataType.Line(this.line),"Unexpected character: "+String.fromCodePoint(a))}};d.prototype.identifier=function(){for(;this.isAlphaNumeric(this.peek());)this.advance();var a=b.phases.Scanner.keywords.h[this.source.substring(this.start,this.current)];this.addToken(null==
a?b.TokenType.Identifier:a)};d.prototype.string=function(){for(;(39!=this.peek()||92==this.peekPrevious())&&!this.isAtEnd();)10==this.peek()&&this.line++,this.advance();if(this.isAtEnd())b.Cosy.error(b.ErrorDataType.Line(this.line),"Unterminated string.");else{this.advance();var a=this.source.substring(this.start+1,this.current-1);a=q.replace(a,"\\n","\n");a=q.replace(a,"\\'","'");this.addToken(b.TokenType.String,a)}};d.prototype.number=function(){for(;this.isDigit(this.peek());)this.advance();if(46==
this.peek()&&this.isDigit(this.peekNext()))for(this.advance();this.isDigit(this.peek());)this.advance();this.addToken(b.TokenType.Number,parseFloat(this.source.substring(this.start,this.current)))};d.prototype.isDigit=function(a){return 48<=a?57>=a:!1};d.prototype.isAlpha=function(a){return 97<=a&&122>=a||65<=a&&90>=a?!0:95==a};d.prototype.isAlphaNumeric=function(a){return this.isAlpha(a)?!0:this.isDigit(a)};d.prototype.match=function(a){if(this.isAtEnd()||w.cca(this.source,this.current)!=a)return!1;
this.current++;return!0};d.prototype.peek=function(){return this.isAtEnd()?0:w.cca(this.source,this.current)};d.prototype.peekNext=function(){return this.current+1>=this.source.length?0:w.cca(this.source,this.current+1)};d.prototype.peekPrevious=function(){return this.current-1>=this.source.length?0:w.cca(this.source,this.current-1)};d.prototype.advance=function(){this.current++;return w.cca(this.source,this.current-1)};d.prototype.addToken=function(a,c){this.tokens.push(new b.Token(a,this.source.substring(this.start,
this.current),c,this.line))};d.prototype.isAtEnd=function(){return this.current>=this.source.length};b.phases.Scanner=d;b.phases.Scanner.__name__=!0;Object.assign(b.phases.Scanner.prototype,{__class__:b.phases.Scanner});b.phases.VariableType=t["cosy.phases.VariableType"]={__ename__:!0,__constructs__:"Unknown Void Boolean Number Text Instance Function Array Struct NamedStruct Mutable".split(" "),Unknown:{_hx_index:0,__enum__:"cosy.phases.VariableType",toString:g},Void:{_hx_index:1,__enum__:"cosy.phases.VariableType",
toString:g},Boolean:{_hx_index:2,__enum__:"cosy.phases.VariableType",toString:g},Number:{_hx_index:3,__enum__:"cosy.phases.VariableType",toString:g},Text:{_hx_index:4,__enum__:"cosy.phases.VariableType",toString:g},Instance:{_hx_index:5,__enum__:"cosy.phases.VariableType",toString:g},Function:(f=function(a,b){return{_hx_index:6,paramTypes:a,returnType:b,__enum__:"cosy.phases.VariableType",toString:g}},f.__params__=["paramTypes","returnType"],f),Array:(f=function(a){return{_hx_index:7,type:a,__enum__:"cosy.phases.VariableType",
toString:g}},f.__params__=["type"],f),Struct:(f=function(a){return{_hx_index:8,variables:a,__enum__:"cosy.phases.VariableType",toString:g}},f.__params__=["variables"],f),NamedStruct:(f=function(a){return{_hx_index:9,name:a,__enum__:"cosy.phases.VariableType",toString:g}},f.__params__=["name"],f),Mutable:(f=function(a){return{_hx_index:10,type:a,__enum__:"cosy.phases.VariableType",toString:g}},f.__params__=["type"],f)};f=function(){this.inferredReturnType=b.phases.VariableType.Void;this.typedReturnType=
b.phases.VariableType.Unknown;this.variableTypes=new h.ds.StringMap;this.structsMeta=new h.ds.StringMap;this.variableTypes.h.clock=b.phases.VariableType.Function([],b.phases.VariableType.Number);this.variableTypes.h.random=b.phases.VariableType.Function([],b.phases.VariableType.Number)};f.prototype.typeStmts=function(a){for(var b=0;b<a.length;)this.typeStmt(a[b++])};f.prototype.typeStmt=function(a){for(;;){switch(a._hx_index){case 0:this.typeStmts(a.statements);break;case 3:this.typeExpr(a.e);break;
case 4:var c=a.body,e=a.to,d=a.name,f=a.keyword;switch(this.typeExpr(a.from)._hx_index){case 0:b.Cosy.warning(b.ErrorDataType.Token(f),'"From" clause has type Unknown');break;case 3:break;default:b.Cosy.error(b.ErrorDataType.Token(f),'"From" clause must evaluate to a number')}switch(this.typeExpr(e)._hx_index){case 0:b.Cosy.warning(b.ErrorDataType.Token(f),'"To" clause has type Unknown');break;case 3:break;default:b.Cosy.error(b.ErrorDataType.Token(f),'"To" clause must evaluate to a number')}null!=
d&&(this.variableTypes.h[d.lexeme]=b.phases.VariableType.Number);this.typeStmts(c);break;case 5:c=a.body;e=a.name;a=this.typeExpr(a.array);switch(a._hx_index){case 0:this.variableTypes.h[e.lexeme]=b.phases.VariableType.Unknown;break;case 7:this.variableTypes.h[e.lexeme]=a.type;break;case 10:a=a.type;7==a._hx_index?this.variableTypes.h[e.lexeme]=a.type:b.Cosy.error(b.ErrorDataType.Token(e),"Can only loop over value of type array.");break;default:b.Cosy.error(b.ErrorDataType.Token(e),"Can only loop over value of type array.")}this.typeStmts(c);
break;case 6:this.typeStmts(a.body);break;case 7:this.handleFunc(a.name,a.params,a.body,a.returnType);break;case 8:c=a.el;this.typeStmt(a.then);if(null!=c){a=c;continue}break;case 9:1==this.typeExpr(a.e)._hx_index&&b.Cosy.error(b.ErrorDataType.Token(a.keyword),"Cannot print values of type void.");break;case 10:c=a.value;null!=c?(this.inferredReturnType=this.typeExpr(c),this.matchType(this.inferredReturnType,this.typedReturnType)||b.Cosy.error(b.ErrorDataType.Token(a.keyword),"Function expected to return "+
this.formatType(this.typedReturnType)+" but got "+this.formatType(this.inferredReturnType))):this.inferredReturnType=b.phases.VariableType.Void;break;case 11:c=a.declarations;a=a.name;e={members:new h.ds.StringMap};d=new h.ds.StringMap;for(f=0;f<c.length;){var g=c[f];++f;if(12==g._hx_index){var k=g.mut,l=g.init,n=g.name;e.members.h[n.lexeme]={mutable:k,initialized:null!=l};g=this.typeVar(n,g.type,l);k&&(g=b.phases.VariableType.Mutable(g));d.h[n.lexeme]=g}else throw h.Exception.thrown("structs can only have var and mut");
}this.structsMeta.h[a.lexeme]=e;this.variableTypes.h[a.lexeme]=b.phases.VariableType.Struct(d);break;case 12:c=a.name,e=this.typeVar(c,a.type,a.init),a.mut&&(e=b.phases.VariableType.Mutable(e)),this.variableTypes.h[c.lexeme]=e}break}};f.prototype.typeVar=function(a,c,e){var d=null!=e?this.typeExpr(e):b.phases.VariableType.Unknown;1==d._hx_index&&b.Cosy.error(b.ErrorDataType.Token(a),"Cannot assign Void to a variable");null==e||this.matchType(d,c)||b.Cosy.error(b.ErrorDataType.Token(a),"Expected variable to have type "+
this.formatType(c)+" but got "+this.formatType(d)+".");return 0!=c._hx_index?c:d};f.prototype.typeExpr=function(a){switch(a._hx_index){case 0:var c=a.exprs;a=a.keyword;for(var e=b.phases.VariableType.Unknown,d=0,f=c.length;d<f;){var g=d++,k=this.typeExpr(c[g]);0!=k._hx_index&&(0==e._hx_index?e=k:this.matchType(k,e)||b.Cosy.error(b.ErrorDataType.Token(a),"Array values expected to be "+this.formatType(e)+" but got "+this.formatType(k)+" at index "+g+"."))}return b.phases.VariableType.Array(e);case 1:return c=
a.name,a=this.typeExpr(a.value),e=this.variableTypes.h[c.lexeme],(null==e?0:0==e._hx_index)||(null==e?0:10==e._hx_index&&0==e.type._hx_index)?this.variableTypes.h[c.lexeme]=a:this.matchType(e,a)||b.Cosy.error(b.ErrorDataType.Token(c),"Cannot assign "+this.formatType(a)+" to "+this.formatType(e,!1)),a;case 2:c=a.right;e=a.left;switch(a.op.type._hx_index){case 12:a=this.typeExpr(e);c=this.typeExpr(c);if(4==a._hx_index||4==c._hx_index)return b.phases.VariableType.Text;if(3==a._hx_index||3==c._hx_index)return b.phases.VariableType.Number;
c=b.phases.VariableType.Unknown;break;case 10:case 14:case 16:c=b.phases.VariableType.Number;break;case 18:case 19:case 20:case 21:case 22:case 23:case 24:case 25:c=b.phases.VariableType.Boolean;break;default:throw h.Exception.thrown("should never happen");}break;case 3:f=a.$arguments;c=a.paren;d=this.typeExpr(a.callee);10==d._hx_index&&(d=d.type);a=b.phases.VariableType.Unknown;switch(d._hx_index){case 6:e=d.paramTypes;a=d.returnType;d=[];for(g=0;g<f.length;)d.push(this.typeExpr(f[g++]));if(f.length!=
e.length)b.Cosy.error(b.ErrorDataType.Token(c),"Expected "+e.length+" argument(s) but got "+f.length+".");else for(f=0,g=e.length;f<g;)k=f++,0==d[k]._hx_index&&b.Cosy.warning(b.ErrorDataType.Token(c),"Argument "+(k+1)+" has type Unknown."),this.matchType(d[k],e[k])||b.Cosy.error(b.ErrorDataType.Token(c),"Expected argument "+(k+1)+" to be "+this.formatType(e[k])+" but got "+this.formatType(d[k])+".")}c=a;break;case 4:switch(c=a.name,a=this.typeExpr(a.obj),a._hx_index){case 4:switch(c.lexeme){case "charAt":return b.phases.VariableType.Text;
case "length":return b.phases.VariableType.Number;case "split":return b.phases.VariableType.Array(b.phases.VariableType.Text);default:return b.Cosy.error(b.ErrorDataType.Token(c),"Unknown array property or function."),b.phases.VariableType.Void}case 7:switch(a=a.type,c.lexeme){case "concat":return b.Cosy.error(b.ErrorDataType.Token(c),"Cannot call mutating method on immutable array."),b.phases.VariableType.Void;case "get":return b.phases.VariableType.Function([b.phases.VariableType.Number],a);case "length":return b.phases.VariableType.Number;
case "pop":return b.Cosy.error(b.ErrorDataType.Token(c),"Cannot call mutating method on immutable array."),b.phases.VariableType.Void;case "push":return b.Cosy.error(b.ErrorDataType.Token(c),"Cannot call mutating method on immutable array."),b.phases.VariableType.Void;default:return b.Cosy.error(b.ErrorDataType.Token(c),"Unknown array property or function."),b.phases.VariableType.Void}case 8:e=a.variables;if(Object.prototype.hasOwnProperty.call(e.h,c.lexeme))return e.h[c.lexeme];b.Cosy.error(b.ErrorDataType.Token(c),
'No member named "'+c.lexeme+'" in struct of type '+this.formatType(a,!1));return b.phases.VariableType.Unknown;case 10:switch(e=a.type,e._hx_index){case 4:switch(c.lexeme){case "charAt":return b.phases.VariableType.Text;case "length":return b.phases.VariableType.Number;case "split":return b.phases.VariableType.Array(b.phases.VariableType.Text);default:return b.Cosy.error(b.ErrorDataType.Token(c),"Unknown array property or function."),b.phases.VariableType.Void}case 7:switch(a=e.type,c.lexeme){case "concat":return b.phases.VariableType.Function([b.phases.VariableType.Array(a)],
b.phases.VariableType.Void);case "get":return b.phases.VariableType.Function([b.phases.VariableType.Number],a);case "length":return b.phases.VariableType.Number;case "pop":return b.phases.VariableType.Function([],a);case "push":return b.phases.VariableType.Function([a],b.phases.VariableType.Void);default:return b.Cosy.error(b.ErrorDataType.Token(c),"Unknown array property or function."),b.phases.VariableType.Void}case 8:e=e.variables;if(Object.prototype.hasOwnProperty.call(e.h,c.lexeme))return e.h[c.lexeme];
b.Cosy.error(b.ErrorDataType.Token(c),'No member named "'+c.lexeme+'" in struct of type '+this.formatType(a,!1));return b.phases.VariableType.Unknown;default:return b.phases.VariableType.Unknown}default:return b.phases.VariableType.Unknown}case 5:c=this.typeExpr(a.e);break;case 6:a=a.v;c="number"==typeof a?b.phases.VariableType.Number:"string"==typeof a?b.phases.VariableType.Text:"boolean"==typeof a?b.phases.VariableType.Boolean:b.phases.VariableType.Unknown;break;case 7:c=b.phases.VariableType.Boolean;
break;case 8:a=a.name;c=b.phases.VariableType.Mutable(this.variableTypes.h[a.lexeme]);e=c.type;10==e._hx_index?8!=e.type._hx_index&&b.Cosy.error(b.ErrorDataType.Token(a),'Only mutable structs can be passed as "mut". You passed '+this.formatType(c,!1)+"."):b.Cosy.error(b.ErrorDataType.Token(a),'Only mutable structs can be passed as "mut". You passed '+this.formatType(c,!1)+".");break;case 9:e=a.value;c=a.name;a=this.typeExpr(a.obj);switch(a._hx_index){case 9:a=this.variableTypes.h[a.name];break;case 10:switch(d=
a.type,d._hx_index){case 8:a=b.phases.VariableType.Struct(d.variables);break;case 9:a=this.variableTypes.h[d.name]}}8==a._hx_index&&(d=a.variables,Object.prototype.hasOwnProperty.call(d.h,c.lexeme)?(a=this.typeExpr(e),e=d.h[c.lexeme],d=null==e?e:10==e._hx_index?e.type:e,(null==e?0:10==e._hx_index)?this.matchType(a,d)||b.Cosy.error(b.ErrorDataType.Token(c),"Expected value of type "+this.formatType(d)+" but got "+this.formatType(a)):b.Cosy.error(b.ErrorDataType.Token(c),"Member is not mutable.")):b.Cosy.error(b.ErrorDataType.Token(c),
'No member named "'+c.lexeme+'" in struct of type '+this.formatType(a,!1)));c=b.phases.VariableType.Unknown;break;case 10:d=a.decls;a=a.name;c=this.variableTypes.h[a.lexeme];e=[];if(null==c)throw h.Exception.thrown("unexpected");if(8==c._hx_index)f=c.variables;else throw h.Exception.thrown("unexpected");for(g=0;g<d.length;){var l=d[g];++g;if(1==l._hx_index){k=l.name;if(!Object.prototype.hasOwnProperty.call(f.h,k.lexeme)){b.Cosy.error(b.ErrorDataType.Token(k),'No member named "'+k.lexeme+'" in struct '+
a.lexeme);break}else if(-1!=e.indexOf(k.lexeme)){b.Cosy.error(b.ErrorDataType.Token(k),"Member already assigned in initializer.");break}l=this.typeExpr(l.value);var n=f.h[k.lexeme];n=null==n?n:10==n._hx_index?n.type:n;e.push(k.lexeme);this.matchType(l,n)||b.Cosy.error(b.ErrorDataType.Token(k),"Expected value to be of type "+this.formatType(n)+" but got "+this.formatType(l))}else throw h.Exception.thrown("unexpected");}for(d=h.ds.StringMap.kvIterator(this.structsMeta.h[a.lexeme].members.h);d.hasNext();)f=
d.next(),g=f.key,f.value.initialized||-1==e.indexOf(g)&&b.Cosy.error(b.ErrorDataType.Token(a),'Member "'+g+'" not initialized.');break;case 11:switch(a.op.type._hx_index){case 10:c=b.phases.VariableType.Number;break;case 18:c=b.phases.VariableType.Boolean;break;default:throw h.Exception.thrown("should never happen");}break;case 12:return a=a.name,Object.prototype.hasOwnProperty.call(this.variableTypes.h,a.lexeme)?this.variableTypes.h[a.lexeme]:b.phases.VariableType.Unknown;case 13:c=this.handleFunc(null,
a.params,a.body,a.returnType)}return c};f.prototype.handleFunc=function(a,c,e,d){for(var f=[],g=0;g<c.length;)f.push(c[g++].type);for(g=0;g<c.length;){var h=c[g];++g;this.variableTypes.h[h.name.lexeme]=h.type}this.typedReturnType=d;this.inferredReturnType=b.phases.VariableType.Void;this.typeStmts(e);c=0==d._hx_index?this.inferredReturnType:d;null!=a&&(this.variableTypes.h[a.lexeme]=b.phases.VariableType.Function(f,c));return b.phases.VariableType.Function(f,c)};f.prototype.matchType=function(a,b){for(;;)switch(b._hx_index){case 0:return!0;
case 6:var c=b.returnType,d=b.paramTypes;switch(a._hx_index){case 6:b=a.returnType;a=a.paramTypes;if(a.length!=d.length)return!1;for(var f=0;f<a.length;)for(var g=a[f++],k=0;k<d.length;)if(!this.matchType(g,d[k++]))return!1;a=b;b=c;continue;case 10:a=a.type;continue;default:return a==b}case 7:c=b.type;switch(a._hx_index){case 7:d=a.type;if(0==d._hx_index)return!0;a=d;b=c;break;case 10:a=a.type;continue;default:return a==b}break;case 8:switch(d=b.variables,a._hx_index){case 8:c=a.variables;for(b=h.ds.StringMap.kvIterator(c.h);b.hasNext();)if(f=
b.next(),a=f.key,f=f.value,!Object.prototype.hasOwnProperty.call(d.h,a)||d.h[a]!=f)return!1;for(d=h.ds.StringMap.kvIterator(d.h);d.hasNext();)if(a=d.next(),b=a.key,a=a.value,!Object.prototype.hasOwnProperty.call(c.h,b)||c.h[b]!=a)return!1;return!0;case 10:a=a.type;continue;default:return a==b}case 9:b=this.variableTypes.h[b.name];continue;case 10:if(10==a._hx_index)a=a.type,b=b.type;else return a==b;break;default:if(10==a._hx_index)a=a.type;else return a==b}};f.prototype.formatType=function(a,b){for(null==
b&&(b=!0);;)switch(a._hx_index){case 2:return"Bool";case 3:return"Num";case 4:return"Str";case 6:b=a.returnType;var c=a.paramTypes;a=[];for(var d=0;d<c.length;)a.push(this.formatType(c[d++]));c=1==b._hx_index?"":" -> "+this.formatType(b);a="Fn("+a.join(", ")+")"+c;return 1==b._hx_index?a:"("+a+")";case 7:return b=a.type,0==b._hx_index?"Array":"Array("+this.formatType(b)+")";case 8:b=[];for(a=h.ds.StringMap.kvIterator(a.variables.h);a.hasNext();)c=a.next(),b.push(""+c.key+" "+this.formatType(c.value));
b.sort(function(a,b){return a<b?-1:b<a?1:0});return"Struct { "+b.join(", ")+" }";case 9:a=this.variableTypes.h[a.name];b=!0;continue;case 10:a=a.type;if(b)return"Mut("+this.formatType(a)+")";b=!0;break;default:return""+u.string(a)}};b.phases.Typer=f;b.phases.Typer.__name__=!0;Object.assign(b.phases.Typer.prototype,{__class__:b.phases.Typer});var h={IMap:function(){}};h.IMap.__name__=!0;f=function(a,b,d){var c=Error.call(this,a);this.message=c.message;"stack"in c&&(this.stack=c.stack);this.message=
a;this.__previousException=b;this.__nativeException=null!=d?d:this};$jscomp.inherits(f,Error);f.prototype.unwrap=function(){return this.__nativeException};f.prototype.get_native=function(){return this.__nativeException};f.caught=function(a){return a instanceof h.Exception?a:a instanceof Error?new h.Exception(a.message,null,a):new h.ValueException(a,null,a)};f.thrown=function(a){return a instanceof h.Exception?a.get_native():a instanceof Error?a:new h.ValueException(a)};h.Exception=f;h.Exception.__name__=
!0;h.Exception.__super__=Error;Object.assign(h.Exception.prototype,{__class__:h.Exception});f=function(a,b,d){b=h.Exception.call(this,String(a),b,d)||this;b.value=a;return b};$jscomp.inherits(f,h.Exception);f.__super__=h.Exception.__super__;f.prototype.unwrap=function(){return this.value};h.ValueException=f;h.ValueException.__name__=!0;h.ValueException.__super__=h.Exception;Object.assign(h.ValueException.prototype,{__class__:h.ValueException});h.ds={};f=function(){this.h={__keys__:{}}};f.prototype.set=
function(a,b){var c=a.__id__;null==c&&(c=a.__id__=l.$haxeUID++);this.h[c]=b;this.h.__keys__[c]=a};h.ds.ObjectMap=f;h.ds.ObjectMap.__name__=!0;h.ds.ObjectMap.__interfaces__=[h.IMap];Object.assign(h.ds.ObjectMap.prototype,{__class__:h.ds.ObjectMap});f=function(){this.h=Object.create(null)};f.kvIterator=function(a){var b=Object.keys(a),d=b.length,f=0;return{hasNext:function(){return f<d},next:function(){f+=1;var c=b[f-1];return{key:c,value:a[c]}}}};h.ds.StringMap=f;h.ds.StringMap.__name__=!0;h.ds.StringMap.__interfaces__=
[h.IMap];Object.assign(h.ds.StringMap.prototype,{__class__:h.ds.StringMap});h.io={};f=function(){};f.prototype.toString=function(){return"Eof"};h.io.Eof=f;h.io.Eof.__name__=!0;Object.assign(h.io.Eof.prototype,{__class__:h.io.Eof});h.iterators={};f=function(a){this.current=0;this.array=a};f.prototype.hasNext=function(){return this.current<this.array.length};f.prototype.next=function(){return this.array[this.current++]};h.iterators.ArrayIterator=f;h.iterators.ArrayIterator.__name__=!0;Object.assign(h.iterators.ArrayIterator.prototype,
{__class__:h.iterators.ArrayIterator});var v={};f=function(){};f.getClass=function(a){if(null==a)return null;if(a instanceof Array)return Array;var b=a.__class__;if(null!=b)return b;a=v.Boot.__nativeClassName(a);return null!=a?v.Boot.__resolveNativeClass(a):null};f.__string_rec=function(a,b){if(null==a)return"null";if(5<=b.length)return"<...>";var c=typeof a;"function"==c&&(a.__name__||a.__ename__)&&(c="object");switch(c){case "function":return"<function>";case "object":if(a.__enum__){var d=t[a.__enum__];
c=d.__constructs__[a._hx_index];var f=d[c];if(f.__params__){b+="\t";d=[];var g=0;for(f=f.__params__;g<f.length;){var h=f[g];g+=1;d.push(v.Boot.__string_rec(a[h],b))}return c+"("+d.join(",")+")"}return c}if(a instanceof Array){c="[";b+="\t";d=0;for(g=a.length;d<g;)f=d++,c+=(0<f?",":"")+v.Boot.__string_rec(a[f],b);return c+"]"}try{d=a.toString}catch(r){return"???"}if(null!=d&&d!=Object.toString&&"function"==typeof d&&(c=a.toString(),"[object Object]"!=c))return c;c="{\n";b+="\t";d=null!=a.hasOwnProperty;
g=null;for(g in a)d&&!a.hasOwnProperty(g)||"prototype"==g||"__class__"==g||"__super__"==g||"__interfaces__"==g||"__properties__"==g||(2!=c.length&&(c+=", \n"),c+=b+g+" : "+v.Boot.__string_rec(a[g],b));b=b.substring(1);return c+("\n"+b+"}");case "string":return a;default:return String(a)}};f.__interfLoop=function(a,b){for(;;){if(null==a)return!1;if(a==b)return!0;var c=a.__interfaces__;if(null!=c&&(null==a.__super__||a.__super__.__interfaces__!=c))for(var d=0,f=c.length;d<f;){var g=c[d++];if(g==b||
v.Boot.__interfLoop(g,b))return!0}a=a.__super__}};f.__implements=function(a,b){return v.Boot.__interfLoop(v.Boot.getClass(a),b)};f.__nativeClassName=function(a){a=v.Boot.__toStr.call(a).slice(8,-1);return"Object"==a||"Function"==a||"Math"==a||"JSON"==a?null:a};f.__resolveNativeClass=function(a){return l[a]};v.Boot=f;v.Boot.__name__=!0;l.$haxeUID|=0;"undefined"!=typeof performance&&"function"==typeof performance.now&&(w.now=performance.now.bind(performance));null==String.fromCodePoint&&(String.fromCodePoint=
function(a){return 65536>a?String.fromCharCode(a):String.fromCharCode((a>>10)+55232)+String.fromCharCode((a&1023)+56320)});String.prototype.__class__=String;String.__name__=!0;Array.__name__=!0;h.ds.ObjectMap.count=0;v.Boot.__toStr={}.toString;b.phases.Interpreter.__meta__={fields:{evaluate:{SuppressWarnings:["checkstyle:CyclomaticComplexity","checkstyle:NestedControlFlow","checkstyle:MethodLength"]}}};b.phases.Interpreter.uninitialized={};b.Cosy.interpreter=new b.phases.Interpreter;b.Cosy.foreignFunctions=
new h.ds.StringMap;b.Cosy.foreignVariables=new h.ds.StringMap;b.Cosy.hadError=!1;b.Cosy.hadRuntimeError=!1;b.Cosy.prettyPrint=!1;b.Cosy.javascript=!1;b.phases.Scanner.keywords=function(a){a=new h.ds.StringMap;a.h.and=b.TokenType.And;a.h["break"]=b.TokenType.Break;a.h["continue"]=b.TokenType.Continue;a.h["else"]=b.TokenType.Else;a.h["false"]=b.TokenType.False;a.h["for"]=b.TokenType.For;a.h.foreign=b.TokenType.Foreign;a.h.fn=b.TokenType.Fn;a.h["in"]=b.TokenType.In;a.h["if"]=b.TokenType.If;a.h.mut=b.TokenType.Mut;
a.h.or=b.TokenType.Or;a.h.print=b.TokenType.Print;a.h["return"]=b.TokenType.Return;a.h.struct=b.TokenType.Struct;a.h["true"]=b.TokenType.True;a.h["var"]=b.TokenType.Var;a.h.Bool=b.TokenType.BooleanType;a.h.Num=b.TokenType.NumberType;a.h.Str=b.TokenType.StringType;a.h.Void=b.TokenType.VoidType;a.h.Fn=b.TokenType.FunctionType;a.h.Array=b.TokenType.ArrayType;return a}(this);b.Cosy.main()})("undefined"!=typeof exports?exports:"undefined"!=typeof window?window:"undefined"!=typeof self?self:this,"undefined"!=
typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this);
